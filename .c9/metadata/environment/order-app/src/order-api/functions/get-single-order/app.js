{"filter":false,"title":"app.js","tooltip":"/order-app/src/order-api/functions/get-single-order/app.js","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":0,"column":0},"end":{"row":39,"column":0},"action":"insert","lines":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.","// SPDX-License-Identifier: MIT-0","","const tableName = process.env.ORDER_TABLE;","const dynamodb = require('aws-sdk/clients/dynamodb');","const docClient = new dynamodb.DocumentClient();","","exports.getOrderById = async (event) => {","    if (event.httpMethod !== 'GET') {","        throw new Error(`getAllItems only accept GET method, you tried: ${event.httpMethod}`);","    }","    const orderId = event.pathParameters.orderId;    // It gets orderId from url","","    let get_item = {","        user_id : \"static_user\",   ","        id: orderId","    }","","    let params = {","        TableName : tableName,","        Key: get_item","    };","    ","    let item = null;","    // We call the Get function to get the single Item","    try {","        const data = await docClient.get(params).promise();","        item = data.Item;","    } catch (err) {","        console.log(\"Failure\", err.message)","    }","","    const response = {","        statusCode: 200,","        body: JSON.stringify(item)","    };","","    return response;","}",""],"id":1}],[{"start":{"row":13,"column":4},"end":{"row":13,"column":7},"action":"insert","lines":["// "],"id":2},{"start":{"row":14,"column":4},"end":{"row":14,"column":7},"action":"insert","lines":["// "]},{"start":{"row":15,"column":4},"end":{"row":15,"column":7},"action":"insert","lines":["// "]},{"start":{"row":16,"column":4},"end":{"row":16,"column":7},"action":"insert","lines":["// "]}],[{"start":{"row":16,"column":8},"end":{"row":17,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":17,"column":0},"end":{"row":17,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":17,"column":4},"end":{"row":23,"column":0},"action":"insert","lines":["let get_item = {","  user_id:","    event.requestContext.authorizer.claims[\"cognito:username\"] ||","    event.requestContext.authorizer.claims.username, // As we are using Lambda proxy from AWS ApiGateway, the cognito username will directly pass to here.","  id: orderId,","}",""],"id":4}],[{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"remove","lines":["    "],"id":5},{"start":{"row":18,"column":10},"end":{"row":19,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":18,"column":10},"end":{"row":18,"column":11},"action":"insert","lines":[" "],"id":6}],[{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"remove","lines":["    "],"id":7},{"start":{"row":18,"column":72},"end":{"row":19,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":18,"column":72},"end":{"row":18,"column":73},"action":"insert","lines":[" "],"id":8}],[{"start":{"row":18,"column":0},"end":{"row":18,"column":4},"action":"insert","lines":["    "],"id":9},{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"insert","lines":["    "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":13,"column":3},"end":{"row":13,"column":6},"action":"remove","lines":[" //"],"id":10,"ignore":true},{"start":{"row":14,"column":3},"end":{"row":14,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":15,"column":3},"end":{"row":15,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":16,"column":4},"end":{"row":21,"column":0},"action":"remove","lines":["// }","    let get_item = {","      user_id: event.requestContext.authorizer.claims[\"cognito:username\"] || event.requestContext.authorizer.claims.username, // As we are using Lambda proxy from AWS ApiGateway, the cognito username will directly pass to here.","      id: orderId,","    }",""]},{"start":{"row":16,"column":4},"end":{"row":16,"column":5},"action":"insert","lines":["}"]}],[{"start":{"row":13,"column":3},"end":{"row":13,"column":6},"action":"insert","lines":[" //"],"id":11,"ignore":true},{"start":{"row":14,"column":3},"end":{"row":14,"column":6},"action":"insert","lines":[" //"]},{"start":{"row":15,"column":3},"end":{"row":15,"column":6},"action":"insert","lines":[" //"]},{"start":{"row":16,"column":4},"end":{"row":16,"column":5},"action":"remove","lines":["}"]},{"start":{"row":16,"column":4},"end":{"row":21,"column":0},"action":"insert","lines":["// }","    let get_item = {","      user_id: event.requestContext.authorizer.claims[\"cognito:username\"] || event.requestContext.authorizer.claims.username, // As we are using Lambda proxy from AWS ApiGateway, the cognito username will directly pass to here.","      id: orderId,","    }",""]}]]},"ace":{"folds":[],"scrolltop":53,"scrollleft":0,"selection":{"start":{"row":16,"column":4},"end":{"row":16,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":2,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1674717487893,"hash":"615b9aa38f7bb7a93d47f7b03056da63d9475101"}