{"filter":false,"title":"template.yaml","tooltip":"/order-app/template.yaml","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":115,"column":0},"end":{"row":115,"column":2},"action":"insert","lines":["  "],"id":652},{"start":{"row":116,"column":0},"end":{"row":116,"column":2},"action":"insert","lines":["  "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":2},"action":"insert","lines":["  "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":2},"action":"insert","lines":["  "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":2},"action":"insert","lines":["  "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":115,"column":0},"end":{"row":115,"column":2},"action":"insert","lines":["  "],"id":653},{"start":{"row":116,"column":0},"end":{"row":116,"column":2},"action":"insert","lines":["  "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":2},"action":"insert","lines":["  "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":2},"action":"insert","lines":["  "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":2},"action":"insert","lines":["  "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":86,"column":2},"end":{"row":86,"column":4},"action":"insert","lines":["# "],"id":654},{"start":{"row":87,"column":2},"end":{"row":87,"column":4},"action":"insert","lines":["# "]},{"start":{"row":88,"column":2},"end":{"row":88,"column":4},"action":"insert","lines":["# "]},{"start":{"row":89,"column":2},"end":{"row":89,"column":4},"action":"insert","lines":["# "]},{"start":{"row":90,"column":2},"end":{"row":90,"column":4},"action":"insert","lines":["# "]},{"start":{"row":91,"column":2},"end":{"row":91,"column":4},"action":"insert","lines":["# "]},{"start":{"row":92,"column":2},"end":{"row":92,"column":4},"action":"insert","lines":["# "]},{"start":{"row":93,"column":2},"end":{"row":93,"column":4},"action":"insert","lines":["# "]},{"start":{"row":94,"column":2},"end":{"row":94,"column":4},"action":"insert","lines":["# "]},{"start":{"row":95,"column":2},"end":{"row":95,"column":4},"action":"insert","lines":["# "]},{"start":{"row":96,"column":2},"end":{"row":96,"column":4},"action":"insert","lines":["# "]},{"start":{"row":97,"column":2},"end":{"row":97,"column":4},"action":"insert","lines":["# "]},{"start":{"row":98,"column":2},"end":{"row":98,"column":4},"action":"insert","lines":["# "]},{"start":{"row":99,"column":2},"end":{"row":99,"column":4},"action":"insert","lines":["# "]},{"start":{"row":100,"column":2},"end":{"row":100,"column":4},"action":"insert","lines":["# "]},{"start":{"row":101,"column":2},"end":{"row":101,"column":4},"action":"insert","lines":["# "]},{"start":{"row":104,"column":2},"end":{"row":104,"column":4},"action":"insert","lines":["# "]},{"start":{"row":105,"column":2},"end":{"row":105,"column":4},"action":"insert","lines":["# "]}],[{"start":{"row":105,"column":37},"end":{"row":106,"column":0},"action":"insert","lines":["",""],"id":655},{"start":{"row":106,"column":0},"end":{"row":106,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":106,"column":2},"end":{"row":125,"column":0},"action":"insert","lines":["  ApiGwExecutionPolicy: ","    Type: \"AWS::IAM::Policy\"","    Properties: ","      PolicyName: \"apigw-execution-policy\"","      PolicyDocument: ","        Version: \"2012-10-17\"","        Statement: ","          Action:","            - sqs:SendMessage","            - lambda:*","          Effect: Allow","          Resource:","            - !GetAtt GetOrders.Arn","            - !GetAtt OrderQueue.Arn","            - !GetAtt GetSingleOrder.Arn","            - !GetAtt UpdateOrder.Arn","            - !GetAtt DeleteOrder.Arn","      Roles: ","        - Ref: \"ApiGwExecutionRole\"",""],"id":656}],[{"start":{"row":106,"column":2},"end":{"row":106,"column":4},"action":"remove","lines":["  "],"id":657}],[{"start":{"row":86,"column":2},"end":{"row":86,"column":4},"action":"remove","lines":["# "],"id":658}],[{"start":{"row":86,"column":2},"end":{"row":86,"column":4},"action":"insert","lines":["# "],"id":659}],[{"start":{"row":133,"column":1},"end":{"row":141,"column":21},"action":"remove","lines":["     # lab2 part start","      Events:","        SQSEventSource:","          Type: SQS","          Properties:","            Queue: !GetAtt OrderQueue.Arn","            BatchSize: 10","      ","      # lab2 part end"],"id":660},{"start":{"row":133,"column":0},"end":{"row":133,"column":1},"action":"remove","lines":[" "]},{"start":{"row":132,"column":25},"end":{"row":133,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":127,"column":2},"end":{"row":127,"column":4},"action":"insert","lines":["# "],"id":661},{"start":{"row":128,"column":2},"end":{"row":128,"column":4},"action":"insert","lines":["# "]},{"start":{"row":129,"column":2},"end":{"row":129,"column":4},"action":"insert","lines":["# "]},{"start":{"row":130,"column":2},"end":{"row":130,"column":4},"action":"insert","lines":["# "]},{"start":{"row":131,"column":2},"end":{"row":131,"column":4},"action":"insert","lines":["# "]},{"start":{"row":132,"column":2},"end":{"row":132,"column":4},"action":"insert","lines":["# "]},{"start":{"row":133,"column":2},"end":{"row":133,"column":4},"action":"insert","lines":["# "]},{"start":{"row":134,"column":2},"end":{"row":134,"column":4},"action":"insert","lines":["# "]},{"start":{"row":135,"column":2},"end":{"row":135,"column":4},"action":"insert","lines":["# "]},{"start":{"row":136,"column":2},"end":{"row":136,"column":4},"action":"insert","lines":["# "]},{"start":{"row":137,"column":2},"end":{"row":137,"column":4},"action":"insert","lines":["# "]},{"start":{"row":138,"column":2},"end":{"row":138,"column":4},"action":"insert","lines":["# "]},{"start":{"row":139,"column":2},"end":{"row":139,"column":4},"action":"insert","lines":["# "]},{"start":{"row":140,"column":2},"end":{"row":140,"column":4},"action":"insert","lines":["# "]},{"start":{"row":141,"column":2},"end":{"row":141,"column":4},"action":"insert","lines":["# "]},{"start":{"row":142,"column":2},"end":{"row":142,"column":4},"action":"insert","lines":["# "]},{"start":{"row":143,"column":2},"end":{"row":143,"column":4},"action":"insert","lines":["# "]},{"start":{"row":144,"column":2},"end":{"row":144,"column":4},"action":"insert","lines":["# "]},{"start":{"row":145,"column":2},"end":{"row":145,"column":4},"action":"insert","lines":["# "]},{"start":{"row":146,"column":2},"end":{"row":146,"column":4},"action":"insert","lines":["# "]},{"start":{"row":147,"column":2},"end":{"row":147,"column":4},"action":"insert","lines":["# "]},{"start":{"row":148,"column":2},"end":{"row":148,"column":4},"action":"insert","lines":["# "]},{"start":{"row":149,"column":2},"end":{"row":149,"column":4},"action":"insert","lines":["# "]}],[{"start":{"row":150,"column":2},"end":{"row":151,"column":0},"action":"insert","lines":["",""],"id":662},{"start":{"row":151,"column":0},"end":{"row":151,"column":2},"action":"insert","lines":["  "]},{"start":{"row":151,"column":2},"end":{"row":152,"column":0},"action":"insert","lines":["",""]},{"start":{"row":152,"column":0},"end":{"row":152,"column":2},"action":"insert","lines":["  "]},{"start":{"row":152,"column":2},"end":{"row":153,"column":0},"action":"insert","lines":["",""]},{"start":{"row":153,"column":0},"end":{"row":153,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":151,"column":2},"end":{"row":151,"column":3},"action":"insert","lines":["#"],"id":663},{"start":{"row":151,"column":3},"end":{"row":151,"column":4},"action":"insert","lines":["l"]},{"start":{"row":151,"column":4},"end":{"row":151,"column":5},"action":"insert","lines":["a"]},{"start":{"row":151,"column":5},"end":{"row":151,"column":6},"action":"insert","lines":["b"]}],[{"start":{"row":151,"column":6},"end":{"row":151,"column":7},"action":"insert","lines":[" "],"id":664},{"start":{"row":151,"column":7},"end":{"row":151,"column":8},"action":"insert","lines":["2"]}],[{"start":{"row":151,"column":8},"end":{"row":152,"column":0},"action":"insert","lines":["",""],"id":665},{"start":{"row":152,"column":0},"end":{"row":152,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":152,"column":2},"end":{"row":181,"column":0},"action":"insert","lines":["PostOrders:","  Type: AWS::Serverless::Function","  Properties:","    CodeUri: src/order-api/functions/post-orders/","    Handler: app.postOrders","    Runtime: nodejs14.x","    Events:","      SQSEventSource:","        Type: SQS","        Properties:","          Queue: !GetAtt OrderQueue.Arn","          BatchSize: 10","    Environment:","      Variables:","        ORDER_TABLE: !Ref OrderTable","    Policies:","      Statement:","        - Effect: Allow","          Action:","            - dynamodb:PutItem","          Resource:","            - !Sub","              - \"arn:aws:dynamodb:*:*:table/${Table}\"","              - { Table: !Ref OrderTable }","        - Effect: Allow","          Action:","            - logs:*","          Resource:","            - \"*\"",""],"id":666}],[{"start":{"row":152,"column":0},"end":{"row":152,"column":2},"action":"insert","lines":["  "],"id":667},{"start":{"row":153,"column":0},"end":{"row":153,"column":2},"action":"insert","lines":["  "]},{"start":{"row":154,"column":0},"end":{"row":154,"column":2},"action":"insert","lines":["  "]},{"start":{"row":155,"column":0},"end":{"row":155,"column":2},"action":"insert","lines":["  "]},{"start":{"row":156,"column":0},"end":{"row":156,"column":2},"action":"insert","lines":["  "]},{"start":{"row":157,"column":0},"end":{"row":157,"column":2},"action":"insert","lines":["  "]},{"start":{"row":158,"column":0},"end":{"row":158,"column":2},"action":"insert","lines":["  "]},{"start":{"row":159,"column":0},"end":{"row":159,"column":2},"action":"insert","lines":["  "]},{"start":{"row":160,"column":0},"end":{"row":160,"column":2},"action":"insert","lines":["  "]},{"start":{"row":161,"column":0},"end":{"row":161,"column":2},"action":"insert","lines":["  "]},{"start":{"row":162,"column":0},"end":{"row":162,"column":2},"action":"insert","lines":["  "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":2},"action":"insert","lines":["  "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":2},"action":"insert","lines":["  "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":2},"action":"insert","lines":["  "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":2},"action":"insert","lines":["  "]},{"start":{"row":167,"column":0},"end":{"row":167,"column":2},"action":"insert","lines":["  "]},{"start":{"row":168,"column":0},"end":{"row":168,"column":2},"action":"insert","lines":["  "]},{"start":{"row":169,"column":0},"end":{"row":169,"column":2},"action":"insert","lines":["  "]},{"start":{"row":170,"column":0},"end":{"row":170,"column":2},"action":"insert","lines":["  "]},{"start":{"row":171,"column":0},"end":{"row":171,"column":2},"action":"insert","lines":["  "]},{"start":{"row":172,"column":0},"end":{"row":172,"column":2},"action":"insert","lines":["  "]},{"start":{"row":173,"column":0},"end":{"row":173,"column":2},"action":"insert","lines":["  "]},{"start":{"row":174,"column":0},"end":{"row":174,"column":2},"action":"insert","lines":["  "]},{"start":{"row":175,"column":0},"end":{"row":175,"column":2},"action":"insert","lines":["  "]},{"start":{"row":176,"column":0},"end":{"row":176,"column":2},"action":"insert","lines":["  "]},{"start":{"row":177,"column":0},"end":{"row":177,"column":2},"action":"insert","lines":["  "]},{"start":{"row":178,"column":0},"end":{"row":178,"column":2},"action":"insert","lines":["  "]},{"start":{"row":179,"column":0},"end":{"row":179,"column":2},"action":"insert","lines":["  "]},{"start":{"row":180,"column":0},"end":{"row":180,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":152,"column":2},"end":{"row":152,"column":4},"action":"remove","lines":["  "],"id":668}],[{"start":{"row":106,"column":0},"end":{"row":124,"column":35},"action":"remove","lines":["  ApiGwExecutionPolicy: ","    Type: \"AWS::IAM::Policy\"","    Properties: ","      PolicyName: \"apigw-execution-policy\"","      PolicyDocument: ","        Version: \"2012-10-17\"","        Statement: ","          Action:","            - sqs:SendMessage","            - lambda:*","          Effect: Allow","          Resource:","            - !GetAtt GetOrders.Arn","            - !GetAtt OrderQueue.Arn","            - !GetAtt GetSingleOrder.Arn","            - !GetAtt UpdateOrder.Arn","            - !GetAtt DeleteOrder.Arn","      Roles: ","        - Ref: \"ApiGwExecutionRole\""],"id":669}],[{"start":{"row":106,"column":0},"end":{"row":125,"column":0},"action":"insert","lines":["  ApiGwExecutionPolicy: ","    Type: \"AWS::IAM::Policy\"","    Properties: ","      PolicyName: \"apigw-execution-policy\"","      PolicyDocument: ","        Version: \"2012-10-17\"","        Statement: ","          Action:","            - sqs:SendMessage","            - lambda:*","          Effect: Allow","          Resource:","            - !GetAtt GetOrders.Arn","            - !GetAtt OrderQueue.Arn","            - !GetAtt GetSingleOrder.Arn","            - !GetAtt UpdateOrder.Arn","            - !GetAtt DeleteOrder.Arn","      Roles: ","        - Ref: \"ApiGwExecutionRole\"",""],"id":670}],[{"start":{"row":86,"column":2},"end":{"row":106,"column":2},"action":"remove","lines":["# ApiGwExecutionPolicy: ","  #   Type: \"AWS::IAM::Policy\"","  #   Properties: ","  #     PolicyName: \"apigw-execution-policy\"","  #     PolicyDocument: ","  #       Version: \"2012-10-17\"","  #       Statement: ","  #         Action:","  #           - lambda:*","  #         Effect: Allow","  #         Resource:","  #           - !GetAtt GetOrders.Arn","  #           - !GetAtt PostOrders.Arn","  #           - !GetAtt GetSingleOrder.Arn","  #           - !GetAtt UpdateOrder.Arn","  #           - !GetAtt DeleteOrder.Arn","          ","","  #     Roles: ","  #       - Ref: \"ApiGwExecutionRole\"","  "],"id":671,"ignore":true},{"start":{"row":94,"column":0},"end":{"row":95,"column":0},"action":"remove","lines":["            - sqs:SendMessage",""]},{"start":{"row":98,"column":22},"end":{"row":98,"column":26},"action":"insert","lines":["Post"]},{"start":{"row":98,"column":31},"end":{"row":98,"column":36},"action":"remove","lines":["Queue"]},{"start":{"row":98,"column":31},"end":{"row":98,"column":32},"action":"insert","lines":["s"]},{"start":{"row":102,"column":0},"end":{"row":104,"column":0},"action":"insert","lines":["          ","",""]},{"start":{"row":107,"column":0},"end":{"row":109,"column":3},"action":"remove","lines":["","","  #"]},{"start":{"row":107,"column":0},"end":{"row":107,"column":1},"action":"insert","lines":[" "]},{"start":{"row":108,"column":1},"end":{"row":108,"column":3},"action":"remove","lines":[" #"]},{"start":{"row":109,"column":2},"end":{"row":109,"column":3},"action":"remove","lines":["#"]},{"start":{"row":109,"column":4},"end":{"row":109,"column":5},"action":"remove","lines":[" "]},{"start":{"row":110,"column":1},"end":{"row":110,"column":3},"action":"remove","lines":[" #"]},{"start":{"row":111,"column":1},"end":{"row":111,"column":3},"action":"remove","lines":[" #"]},{"start":{"row":112,"column":1},"end":{"row":112,"column":3},"action":"remove","lines":[" #"]},{"start":{"row":113,"column":0},"end":{"row":144,"column":0},"action":"remove","lines":["  #     Environment:","  #       Variables:","  #         ORDER_TABLE: !Ref OrderTable","  #     Policies:","  #       Statement:","  #         - Effect: Allow","  #           Action:","  #             - dynamodb:PutItem","  #           Resource:","  #             - !Sub ","  #               - 'arn:aws:dynamodb:*:*:table/${Table}'","  #               - { Table: !Ref OrderTable }","  #         - Effect: Allow","  #           Action:","  #             - logs:*","  #           Resource:","  #             - \"*\"    ","  ","  #lab 2","  PostOrders:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-api/functions/post-orders/","      Handler: app.postOrders","      Runtime: nodejs14.x","      Events:","        SQSEventSource:","          Type: SQS","          Properties:","            Queue: !GetAtt OrderQueue.Arn","            BatchSize: 10",""]},{"start":{"row":122,"column":20},"end":{"row":122,"column":21},"action":"insert","lines":[" "]},{"start":{"row":123,"column":18},"end":{"row":123,"column":19},"action":"remove","lines":["\""]},{"start":{"row":123,"column":18},"end":{"row":123,"column":19},"action":"insert","lines":["'"]},{"start":{"row":123,"column":54},"end":{"row":123,"column":55},"action":"remove","lines":["\""]},{"start":{"row":123,"column":54},"end":{"row":123,"column":55},"action":"insert","lines":["'"]},{"start":{"row":129,"column":19},"end":{"row":131,"column":0},"action":"remove","lines":["","",""]},{"start":{"row":129,"column":19},"end":{"row":129,"column":21},"action":"insert","lines":["  "]},{"start":{"row":200,"column":0},"end":{"row":211,"column":0},"action":"remove","lines":["  # lab2","  ","  OrderQueue:","    Type: AWS::SQS::Queue","    Properties:","      RedrivePolicy:","        deadLetterTargetArn: !GetAtt OrderDLQueue.Arn","        maxReceiveCount: 2","  ","  OrderDLQueue:","    Type: AWS::SQS::Queue",""]},{"start":{"row":225,"column":0},"end":{"row":234,"column":1},"action":"remove","lines":[" "," # lab 2","  OrderQueueUrl:","    Description: \"URL of order queue\"","    Value: !Ref OrderQueue","  OrderDLQueueUrl:","    Description: \"URL of order dead-letter queue\"","    Value: !Ref OrderDLQueue",""," "]}],[{"start":{"row":86,"column":2},"end":{"row":106,"column":2},"action":"insert","lines":["# ApiGwExecutionPolicy: ","  #   Type: \"AWS::IAM::Policy\"","  #   Properties: ","  #     PolicyName: \"apigw-execution-policy\"","  #     PolicyDocument: ","  #       Version: \"2012-10-17\"","  #       Statement: ","  #         Action:","  #           - lambda:*","  #         Effect: Allow","  #         Resource:","  #           - !GetAtt GetOrders.Arn","  #           - !GetAtt PostOrders.Arn","  #           - !GetAtt GetSingleOrder.Arn","  #           - !GetAtt UpdateOrder.Arn","  #           - !GetAtt DeleteOrder.Arn","          ","","  #     Roles: ","  #       - Ref: \"ApiGwExecutionRole\"","  "],"id":672,"ignore":true},{"start":{"row":114,"column":0},"end":{"row":115,"column":0},"action":"insert","lines":["            - sqs:SendMessage",""]},{"start":{"row":119,"column":22},"end":{"row":119,"column":26},"action":"remove","lines":["Post"]},{"start":{"row":119,"column":27},"end":{"row":119,"column":28},"action":"remove","lines":["s"]},{"start":{"row":119,"column":27},"end":{"row":119,"column":32},"action":"insert","lines":["Queue"]},{"start":{"row":123,"column":0},"end":{"row":125,"column":0},"action":"remove","lines":["          ","",""]},{"start":{"row":126,"column":0},"end":{"row":126,"column":1},"action":"remove","lines":[" "]},{"start":{"row":126,"column":0},"end":{"row":128,"column":3},"action":"insert","lines":["","","  #"]},{"start":{"row":129,"column":1},"end":{"row":129,"column":3},"action":"insert","lines":[" #"]},{"start":{"row":130,"column":2},"end":{"row":130,"column":3},"action":"insert","lines":["#"]},{"start":{"row":130,"column":5},"end":{"row":130,"column":6},"action":"insert","lines":[" "]},{"start":{"row":131,"column":1},"end":{"row":131,"column":3},"action":"insert","lines":[" #"]},{"start":{"row":132,"column":1},"end":{"row":132,"column":3},"action":"insert","lines":[" #"]},{"start":{"row":133,"column":1},"end":{"row":133,"column":3},"action":"insert","lines":[" #"]},{"start":{"row":134,"column":0},"end":{"row":165,"column":0},"action":"insert","lines":["  #     Environment:","  #       Variables:","  #         ORDER_TABLE: !Ref OrderTable","  #     Policies:","  #       Statement:","  #         - Effect: Allow","  #           Action:","  #             - dynamodb:PutItem","  #           Resource:","  #             - !Sub ","  #               - 'arn:aws:dynamodb:*:*:table/${Table}'","  #               - { Table: !Ref OrderTable }","  #         - Effect: Allow","  #           Action:","  #             - logs:*","  #           Resource:","  #             - \"*\"    ","  ","  #lab 2","  PostOrders:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-api/functions/post-orders/","      Handler: app.postOrders","      Runtime: nodejs14.x","      Events:","        SQSEventSource:","          Type: SQS","          Properties:","            Queue: !GetAtt OrderQueue.Arn","            BatchSize: 10",""]},{"start":{"row":174,"column":20},"end":{"row":174,"column":21},"action":"remove","lines":[" "]},{"start":{"row":175,"column":18},"end":{"row":175,"column":19},"action":"remove","lines":["'"]},{"start":{"row":175,"column":18},"end":{"row":175,"column":19},"action":"insert","lines":["\""]},{"start":{"row":175,"column":54},"end":{"row":175,"column":55},"action":"remove","lines":["'"]},{"start":{"row":175,"column":54},"end":{"row":175,"column":55},"action":"insert","lines":["\""]},{"start":{"row":181,"column":19},"end":{"row":181,"column":21},"action":"remove","lines":["  "]},{"start":{"row":181,"column":19},"end":{"row":183,"column":0},"action":"insert","lines":["","",""]},{"start":{"row":254,"column":0},"end":{"row":265,"column":0},"action":"insert","lines":["  # lab2","  ","  OrderQueue:","    Type: AWS::SQS::Queue","    Properties:","      RedrivePolicy:","        deadLetterTargetArn: !GetAtt OrderDLQueue.Arn","        maxReceiveCount: 2","  ","  OrderDLQueue:","    Type: AWS::SQS::Queue",""]},{"start":{"row":290,"column":0},"end":{"row":299,"column":1},"action":"insert","lines":[" "," # lab 2","  OrderQueueUrl:","    Description: \"URL of order queue\"","    Value: !Ref OrderQueue","  OrderDLQueueUrl:","    Description: \"URL of order dead-letter queue\"","    Value: !Ref OrderDLQueue",""," "]}],[{"start":{"row":153,"column":2},"end":{"row":153,"column":4},"action":"insert","lines":["# "],"id":673},{"start":{"row":154,"column":2},"end":{"row":154,"column":4},"action":"insert","lines":["# "]},{"start":{"row":155,"column":2},"end":{"row":155,"column":4},"action":"insert","lines":["# "]},{"start":{"row":156,"column":2},"end":{"row":156,"column":4},"action":"insert","lines":["# "]},{"start":{"row":157,"column":2},"end":{"row":157,"column":4},"action":"insert","lines":["# "]},{"start":{"row":158,"column":2},"end":{"row":158,"column":4},"action":"insert","lines":["# "]},{"start":{"row":159,"column":2},"end":{"row":159,"column":4},"action":"insert","lines":["# "]},{"start":{"row":160,"column":2},"end":{"row":160,"column":4},"action":"insert","lines":["# "]},{"start":{"row":161,"column":2},"end":{"row":161,"column":4},"action":"insert","lines":["# "]},{"start":{"row":162,"column":2},"end":{"row":162,"column":4},"action":"insert","lines":["# "]},{"start":{"row":163,"column":2},"end":{"row":163,"column":4},"action":"insert","lines":["# "]},{"start":{"row":164,"column":2},"end":{"row":164,"column":4},"action":"insert","lines":["# "]},{"start":{"row":165,"column":2},"end":{"row":165,"column":4},"action":"insert","lines":["# "]},{"start":{"row":166,"column":2},"end":{"row":166,"column":4},"action":"insert","lines":["# "]},{"start":{"row":167,"column":2},"end":{"row":167,"column":4},"action":"insert","lines":["# "]},{"start":{"row":168,"column":2},"end":{"row":168,"column":4},"action":"insert","lines":["# "]},{"start":{"row":169,"column":2},"end":{"row":169,"column":4},"action":"insert","lines":["# "]},{"start":{"row":170,"column":2},"end":{"row":170,"column":4},"action":"insert","lines":["# "]},{"start":{"row":171,"column":2},"end":{"row":171,"column":4},"action":"insert","lines":["# "]},{"start":{"row":172,"column":2},"end":{"row":172,"column":4},"action":"insert","lines":["# "]},{"start":{"row":173,"column":2},"end":{"row":173,"column":4},"action":"insert","lines":["# "]},{"start":{"row":174,"column":2},"end":{"row":174,"column":4},"action":"insert","lines":["# "]},{"start":{"row":175,"column":2},"end":{"row":175,"column":4},"action":"insert","lines":["# "]},{"start":{"row":176,"column":2},"end":{"row":176,"column":4},"action":"insert","lines":["# "]},{"start":{"row":177,"column":2},"end":{"row":177,"column":4},"action":"insert","lines":["# "]},{"start":{"row":178,"column":2},"end":{"row":178,"column":4},"action":"insert","lines":["# "]},{"start":{"row":179,"column":2},"end":{"row":179,"column":4},"action":"insert","lines":["# "]},{"start":{"row":180,"column":2},"end":{"row":180,"column":4},"action":"insert","lines":["# "]},{"start":{"row":181,"column":2},"end":{"row":181,"column":4},"action":"insert","lines":["# "]}],[{"start":{"row":182,"column":0},"end":{"row":182,"column":2},"action":"insert","lines":["  "],"id":674}],[{"start":{"row":182,"column":2},"end":{"row":183,"column":0},"action":"insert","lines":["",""],"id":675},{"start":{"row":183,"column":0},"end":{"row":183,"column":2},"action":"insert","lines":["  "]},{"start":{"row":183,"column":2},"end":{"row":183,"column":3},"action":"insert","lines":["#"]}],[{"start":{"row":183,"column":3},"end":{"row":183,"column":4},"action":"insert","lines":[" "],"id":676},{"start":{"row":183,"column":4},"end":{"row":183,"column":5},"action":"insert","lines":["l"]},{"start":{"row":183,"column":5},"end":{"row":183,"column":6},"action":"insert","lines":["a"]},{"start":{"row":183,"column":6},"end":{"row":183,"column":7},"action":"insert","lines":["b"]}],[{"start":{"row":183,"column":7},"end":{"row":183,"column":8},"action":"insert","lines":[" "],"id":677},{"start":{"row":183,"column":8},"end":{"row":183,"column":9},"action":"insert","lines":["3"]}],[{"start":{"row":183,"column":9},"end":{"row":184,"column":0},"action":"insert","lines":["",""],"id":678},{"start":{"row":184,"column":0},"end":{"row":184,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":184,"column":2},"end":{"row":213,"column":0},"action":"insert","lines":["  PostOrders:","    Type: AWS::Serverless::Function ","    Properties:","      CodeUri: src/order-api/functions/post-orders/","      Handler: app.postOrders","      Runtime: nodejs14.x","      Events:","        SQSEventSource:","          Type: SQS","          Properties:","            Queue: !GetAtt OrderQueue.Arn","            BatchSize: 10","      Environment:","        Variables:","          STATE_MACHINE_ARN: !Ref OrderManagementSFN","      Policies:","        Statement:","          - Effect: Allow","            Action:","              - logs:*","            Resource:","              - \"*\"    ","          - Effect: Allow","            Action:","              - states:StartExecution","            Resource:","              - !Sub ","                - '${StateMachine}'","                - { StateMachine: !Ref OrderManagementSFN }",""],"id":679}],[{"start":{"row":184,"column":2},"end":{"row":184,"column":4},"action":"remove","lines":["  "],"id":680}],[{"start":{"row":296,"column":0},"end":{"row":296,"column":2},"action":"insert","lines":["  "],"id":681}],[{"start":{"row":296,"column":2},"end":{"row":297,"column":0},"action":"insert","lines":["",""],"id":682},{"start":{"row":297,"column":0},"end":{"row":297,"column":2},"action":"insert","lines":["  "]},{"start":{"row":297,"column":2},"end":{"row":297,"column":3},"action":"insert","lines":["#"]},{"start":{"row":297,"column":3},"end":{"row":297,"column":4},"action":"insert","lines":["l"]}],[{"start":{"row":297,"column":4},"end":{"row":297,"column":5},"action":"insert","lines":["a"],"id":683},{"start":{"row":297,"column":5},"end":{"row":297,"column":6},"action":"insert","lines":["b"]}],[{"start":{"row":297,"column":6},"end":{"row":297,"column":7},"action":"insert","lines":[" "],"id":684},{"start":{"row":297,"column":7},"end":{"row":297,"column":8},"action":"insert","lines":["3"]}],[{"start":{"row":297,"column":8},"end":{"row":298,"column":0},"action":"insert","lines":["",""],"id":685},{"start":{"row":298,"column":0},"end":{"row":298,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":298,"column":2},"end":{"row":304,"column":0},"action":"insert","lines":["  ProcessPaymentFumction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/process-payment/","      Handler: app.processPayment","      Runtime: nodejs14.x",""],"id":686}],[{"start":{"row":298,"column":2},"end":{"row":298,"column":4},"action":"remove","lines":["  "],"id":687}],[{"start":{"row":304,"column":0},"end":{"row":310,"column":0},"action":"insert","lines":["SendOrderToRestaurantFunction:","  Type: AWS::Serverless::Function","  Properties:","    CodeUri: src/order-management/functions/sendordertorestaurant/","    Handler: app.sendOrderToRestaurant","    Runtime: nodejs14.x",""],"id":688}],[{"start":{"row":304,"column":0},"end":{"row":304,"column":2},"action":"insert","lines":["  "],"id":689},{"start":{"row":305,"column":0},"end":{"row":305,"column":2},"action":"insert","lines":["  "]},{"start":{"row":306,"column":0},"end":{"row":306,"column":2},"action":"insert","lines":["  "]},{"start":{"row":307,"column":0},"end":{"row":307,"column":2},"action":"insert","lines":["  "]},{"start":{"row":308,"column":0},"end":{"row":308,"column":2},"action":"insert","lines":["  "]},{"start":{"row":309,"column":0},"end":{"row":309,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":310,"column":0},"end":{"row":352,"column":0},"action":"insert","lines":["  ManageStateFunction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/managestate/","      Handler: app.manageState","      Runtime: nodejs14.x","      Environment:","        Variables:","          ORDER_TABLE: !Ref OrderTable","          SNS_TOPIC_ARN: !Ref OrderTopic","      Policies:","        Statement:","          - Effect: Allow","            Action:","              - dynamodb:GetItem","              - dynamodb:Query ","              - dynamodb:Scan","              - dynamodb:PutItem","              - dynamodb:UpdateItem","            Resource:","              - !Sub ","                - 'arn:aws:dynamodb:*:*:table/${Table}'","                - { Table: !Ref OrderTable }","          - Effect: Allow","            Action:","              - logs:*","            Resource:","              - \"*\"    ","          - Effect: Allow","            Action:","              - SNS:Publish","            Resource:","              - \"*\"    ","  ","  OrderTopic:","    Type: AWS::SNS::Topic","    Properties: ","      Subscription: ","        - Endpoint: \"<YOUR-EMAIL-ADDRESS(i.e.test@gmail.com)>\"","          Protocol: \"email\"","      TopicName: \"order-topic\"","",""],"id":690}],[{"start":{"row":309,"column":25},"end":{"row":310,"column":0},"action":"insert","lines":["",""],"id":691},{"start":{"row":310,"column":0},"end":{"row":310,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":349,"column":22},"end":{"row":349,"column":61},"action":"remove","lines":["YOUR-EMAIL-ADDRESS(i.e.test@gmail.com)>"],"id":692},{"start":{"row":349,"column":21},"end":{"row":349,"column":22},"action":"remove","lines":["<"]}],[{"start":{"row":349,"column":21},"end":{"row":349,"column":22},"action":"insert","lines":["u"],"id":693},{"start":{"row":349,"column":22},"end":{"row":349,"column":23},"action":"insert","lines":["s"]},{"start":{"row":349,"column":23},"end":{"row":349,"column":24},"action":"insert","lines":["a"]},{"start":{"row":349,"column":24},"end":{"row":349,"column":25},"action":"insert","lines":["m"]},{"start":{"row":349,"column":25},"end":{"row":349,"column":26},"action":"insert","lines":["a"]},{"start":{"row":349,"column":26},"end":{"row":349,"column":27},"action":"insert","lines":["."]}],[{"start":{"row":349,"column":27},"end":{"row":349,"column":28},"action":"insert","lines":["j"],"id":694},{"start":{"row":349,"column":28},"end":{"row":349,"column":29},"action":"insert","lines":["a"]},{"start":{"row":349,"column":29},"end":{"row":349,"column":30},"action":"insert","lines":["m"]},{"start":{"row":349,"column":30},"end":{"row":349,"column":31},"action":"insert","lines":["e"]},{"start":{"row":349,"column":31},"end":{"row":349,"column":32},"action":"insert","lines":["e"]},{"start":{"row":349,"column":32},"end":{"row":349,"column":33},"action":"insert","lines":["l"]},{"start":{"row":349,"column":33},"end":{"row":349,"column":34},"action":"insert","lines":["@"]}],[{"start":{"row":349,"column":34},"end":{"row":349,"column":35},"action":"insert","lines":["n"],"id":695},{"start":{"row":349,"column":35},"end":{"row":349,"column":36},"action":"insert","lines":["e"]},{"start":{"row":349,"column":36},"end":{"row":349,"column":37},"action":"insert","lines":["t"]},{"start":{"row":349,"column":37},"end":{"row":349,"column":38},"action":"insert","lines":["s"]},{"start":{"row":349,"column":38},"end":{"row":349,"column":39},"action":"insert","lines":["o"]},{"start":{"row":349,"column":39},"end":{"row":349,"column":40},"action":"insert","lines":["l"]},{"start":{"row":349,"column":40},"end":{"row":349,"column":41},"action":"insert","lines":["t"]},{"start":{"row":349,"column":41},"end":{"row":349,"column":42},"action":"insert","lines":["e"]},{"start":{"row":349,"column":42},"end":{"row":349,"column":43},"action":"insert","lines":["c"]},{"start":{"row":349,"column":43},"end":{"row":349,"column":44},"action":"insert","lines":["h"]}],[{"start":{"row":349,"column":44},"end":{"row":349,"column":45},"action":"insert","lines":["."],"id":696},{"start":{"row":349,"column":45},"end":{"row":349,"column":46},"action":"insert","lines":["c"]},{"start":{"row":349,"column":46},"end":{"row":349,"column":47},"action":"insert","lines":["o"]},{"start":{"row":349,"column":47},"end":{"row":349,"column":48},"action":"insert","lines":["m"]}],[{"start":{"row":353,"column":0},"end":{"row":368,"column":0},"action":"insert","lines":["  OrderManagementSFN:","    Type: AWS::Serverless::StateMachine","    Properties:","      DefinitionUri: src/order-management/statemachine/process-order.asl.json","      DefinitionSubstitutions:","        ManageStateArn: !GetAtt ManageStateFunction.Arn","        ProcessPaymentArn: !GetAtt ProcessPaymentFumction.Arn","        SendOrderToRestaurantArn: !GetAtt SendOrderToRestaurantFunction.Arn","      Policies: ","        - LambdaInvokePolicy:","            FunctionName: !Ref ManageStateFunction","        - LambdaInvokePolicy:","            FunctionName: !Ref ProcessPaymentFumction","        - LambdaInvokePolicy:","            FunctionName: !Ref SendOrderToRestaurantFunction",""],"id":697}],[{"start":{"row":153,"column":0},"end":{"row":184,"column":0},"action":"remove","lines":["  # PostOrders:","  #   Type: AWS::Serverless::Function","  #   Properties:","  #     CodeUri: src/order-api/functions/post-orders/","  #     Handler: app.postOrders","  #     Runtime: nodejs14.x","  #     Events:","  #       SQSEventSource:","  #         Type: SQS","  #         Properties:","  #           Queue: !GetAtt OrderQueue.Arn","  #           BatchSize: 10","  #     Environment:","  #       Variables:","  #         ORDER_TABLE: !Ref OrderTable","  #     Policies:","  #       Statement:","  #         - Effect: Allow","  #           Action:","  #             - dynamodb:PutItem","  #           Resource:","  #             - !Sub","  #               - \"arn:aws:dynamodb:*:*:table/${Table}\"","  #               - { Table: !Ref OrderTable }","  #         - Effect: Allow","  #           Action:","  #             - logs:*","  #           Resource:","  #             - \"*\"","  ","  # lab 3",""],"id":698,"ignore":true},{"start":{"row":154,"column":35},"end":{"row":154,"column":36},"action":"remove","lines":[" "]},{"start":{"row":167,"column":10},"end":{"row":167,"column":52},"action":"remove","lines":["STATE_MACHINE_ARN: !Ref OrderManagementSFN"]},{"start":{"row":167,"column":10},"end":{"row":167,"column":38},"action":"insert","lines":["ORDER_TABLE: !Ref OrderTable"]},{"start":{"row":172,"column":16},"end":{"row":172,"column":22},"action":"remove","lines":["logs:*"]},{"start":{"row":172,"column":16},"end":{"row":172,"column":32},"action":"insert","lines":["dynamodb:PutItem"]},{"start":{"row":174,"column":16},"end":{"row":174,"column":19},"action":"remove","lines":["\"*\""]},{"start":{"row":174,"column":16},"end":{"row":175,"column":1},"action":"insert","lines":["!Sub"," "]},{"start":{"row":175,"column":5},"end":{"row":176,"column":0},"action":"remove","lines":["",""]},{"start":{"row":175,"column":5},"end":{"row":175,"column":6},"action":"insert","lines":[" "]},{"start":{"row":175,"column":18},"end":{"row":177,"column":37},"action":"remove","lines":["Effect: Allow","            Action:","              - states:StartExecution"]},{"start":{"row":175,"column":18},"end":{"row":177,"column":25},"action":"insert","lines":["\"arn:aws:dynamodb:*:*:table/${Table}\"","                - { Table: !Ref OrderTable }","          - Effect: Allow"]},{"start":{"row":178,"column":12},"end":{"row":178,"column":20},"action":"remove","lines":["Resource"]},{"start":{"row":178,"column":12},"end":{"row":178,"column":18},"action":"insert","lines":["Action"]},{"start":{"row":179,"column":16},"end":{"row":180,"column":1},"action":"remove","lines":["!Sub "," "]},{"start":{"row":179,"column":16},"end":{"row":180,"column":0},"action":"insert","lines":["logs:*",""]},{"start":{"row":180,"column":12},"end":{"row":181,"column":59},"action":"remove","lines":["   - '${StateMachine}'","                - { StateMachine: !Ref OrderManagementSFN }"]},{"start":{"row":180,"column":12},"end":{"row":181,"column":19},"action":"insert","lines":["Resource:","              - \"*\""]},{"start":{"row":264,"column":25},"end":{"row":336,"column":60},"action":"remove","lines":["","  ","  #lab 3","  ProcessPaymentFumction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/process-payment/","      Handler: app.processPayment","      Runtime: nodejs14.x","  SendOrderToRestaurantFunction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/sendordertorestaurant/","      Handler: app.sendOrderToRestaurant","      Runtime: nodejs14.x","      ","  ManageStateFunction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/managestate/","      Handler: app.manageState","      Runtime: nodejs14.x","      Environment:","        Variables:","          ORDER_TABLE: !Ref OrderTable","          SNS_TOPIC_ARN: !Ref OrderTopic","      Policies:","        Statement:","          - Effect: Allow","            Action:","              - dynamodb:GetItem","              - dynamodb:Query ","              - dynamodb:Scan","              - dynamodb:PutItem","              - dynamodb:UpdateItem","            Resource:","              - !Sub ","                - 'arn:aws:dynamodb:*:*:table/${Table}'","                - { Table: !Ref OrderTable }","          - Effect: Allow","            Action:","              - logs:*","            Resource:","              - \"*\"    ","          - Effect: Allow","            Action:","              - SNS:Publish","            Resource:","              - \"*\"    ","  ","  OrderTopic:","    Type: AWS::SNS::Topic","    Properties: ","      Subscription: ","        - Endpoint: \"usama.jameel@netsoltech.com\"","          Protocol: \"email\"","      TopicName: \"order-topic\"","","  OrderManagementSFN:","    Type: AWS::Serverless::StateMachine","    Properties:","      DefinitionUri: src/order-management/statemachine/process-order.asl.json","      DefinitionSubstitutions:","        ManageStateArn: !GetAtt ManageStateFunction.Arn","        ProcessPaymentArn: !GetAtt ProcessPaymentFumction.Arn","        SendOrderToRestaurantArn: !GetAtt SendOrderToRestaurantFunction.Arn","      Policies: ","        - LambdaInvokePolicy:","            FunctionName: !Ref ManageStateFunction","        - LambdaInvokePolicy:","            FunctionName: !Ref ProcessPaymentFumction","        - LambdaInvokePolicy:","            FunctionName: !Ref SendOrderToRestaurantFunction"]}],[{"start":{"row":153,"column":0},"end":{"row":184,"column":0},"action":"insert","lines":["  # PostOrders:","  #   Type: AWS::Serverless::Function","  #   Properties:","  #     CodeUri: src/order-api/functions/post-orders/","  #     Handler: app.postOrders","  #     Runtime: nodejs14.x","  #     Events:","  #       SQSEventSource:","  #         Type: SQS","  #         Properties:","  #           Queue: !GetAtt OrderQueue.Arn","  #           BatchSize: 10","  #     Environment:","  #       Variables:","  #         ORDER_TABLE: !Ref OrderTable","  #     Policies:","  #       Statement:","  #         - Effect: Allow","  #           Action:","  #             - dynamodb:PutItem","  #           Resource:","  #             - !Sub","  #               - \"arn:aws:dynamodb:*:*:table/${Table}\"","  #               - { Table: !Ref OrderTable }","  #         - Effect: Allow","  #           Action:","  #             - logs:*","  #           Resource:","  #             - \"*\"","  ","  # lab 3",""],"id":699,"ignore":true},{"start":{"row":185,"column":35},"end":{"row":185,"column":36},"action":"insert","lines":[" "]},{"start":{"row":198,"column":10},"end":{"row":198,"column":38},"action":"remove","lines":["ORDER_TABLE: !Ref OrderTable"]},{"start":{"row":198,"column":10},"end":{"row":198,"column":52},"action":"insert","lines":["STATE_MACHINE_ARN: !Ref OrderManagementSFN"]},{"start":{"row":203,"column":16},"end":{"row":203,"column":32},"action":"remove","lines":["dynamodb:PutItem"]},{"start":{"row":203,"column":16},"end":{"row":203,"column":22},"action":"insert","lines":["logs:*"]},{"start":{"row":205,"column":16},"end":{"row":206,"column":2},"action":"remove","lines":["!Sub","  "]},{"start":{"row":205,"column":16},"end":{"row":205,"column":19},"action":"insert","lines":["\"*\""]},{"start":{"row":205,"column":23},"end":{"row":206,"column":0},"action":"insert","lines":["",""]},{"start":{"row":206,"column":12},"end":{"row":208,"column":25},"action":"remove","lines":["\"arn:aws:dynamodb:*:*:table/${Table}\"","                - { Table: !Ref OrderTable }","          - Effect: Allow"]},{"start":{"row":206,"column":12},"end":{"row":208,"column":37},"action":"insert","lines":["Effect: Allow","            Action:","              - states:StartExecution"]},{"start":{"row":209,"column":12},"end":{"row":209,"column":18},"action":"remove","lines":["Action"]},{"start":{"row":209,"column":12},"end":{"row":209,"column":20},"action":"insert","lines":["Resource"]},{"start":{"row":210,"column":16},"end":{"row":210,"column":22},"action":"remove","lines":["logs:*"]},{"start":{"row":210,"column":16},"end":{"row":210,"column":21},"action":"insert","lines":["!Sub "]},{"start":{"row":211,"column":12},"end":{"row":212,"column":19},"action":"remove","lines":["Resource:","              - \"*\""]},{"start":{"row":211,"column":12},"end":{"row":212,"column":59},"action":"insert","lines":["    - '${StateMachine}'","                - { StateMachine: !Ref OrderManagementSFN }"]},{"start":{"row":295,"column":25},"end":{"row":367,"column":60},"action":"insert","lines":["","  ","  #lab 3","  ProcessPaymentFumction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/process-payment/","      Handler: app.processPayment","      Runtime: nodejs14.x","  SendOrderToRestaurantFunction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/sendordertorestaurant/","      Handler: app.sendOrderToRestaurant","      Runtime: nodejs14.x","      ","  ManageStateFunction:","    Type: AWS::Serverless::Function","    Properties:","      CodeUri: src/order-management/functions/managestate/","      Handler: app.manageState","      Runtime: nodejs14.x","      Environment:","        Variables:","          ORDER_TABLE: !Ref OrderTable","          SNS_TOPIC_ARN: !Ref OrderTopic","      Policies:","        Statement:","          - Effect: Allow","            Action:","              - dynamodb:GetItem","              - dynamodb:Query ","              - dynamodb:Scan","              - dynamodb:PutItem","              - dynamodb:UpdateItem","            Resource:","              - !Sub ","                - 'arn:aws:dynamodb:*:*:table/${Table}'","                - { Table: !Ref OrderTable }","          - Effect: Allow","            Action:","              - logs:*","            Resource:","              - \"*\"    ","          - Effect: Allow","            Action:","              - SNS:Publish","            Resource:","              - \"*\"    ","  ","  OrderTopic:","    Type: AWS::SNS::Topic","    Properties: ","      Subscription: ","        - Endpoint: \"usama.jameel@netsoltech.com\"","          Protocol: \"email\"","      TopicName: \"order-topic\"","","  OrderManagementSFN:","    Type: AWS::Serverless::StateMachine","    Properties:","      DefinitionUri: src/order-management/statemachine/process-order.asl.json","      DefinitionSubstitutions:","        ManageStateArn: !GetAtt ManageStateFunction.Arn","        ProcessPaymentArn: !GetAtt ProcessPaymentFumction.Arn","        SendOrderToRestaurantArn: !GetAtt SendOrderToRestaurantFunction.Arn","      Policies: ","        - LambdaInvokePolicy:","            FunctionName: !Ref ManageStateFunction","        - LambdaInvokePolicy:","            FunctionName: !Ref ProcessPaymentFumction","        - LambdaInvokePolicy:","            FunctionName: !Ref SendOrderToRestaurantFunction"]}],[{"start":{"row":368,"column":0},"end":{"row":368,"column":2},"action":"insert","lines":["  "],"id":700}],[{"start":{"row":368,"column":2},"end":{"row":369,"column":0},"action":"insert","lines":["",""],"id":701},{"start":{"row":369,"column":0},"end":{"row":369,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":369,"column":0},"end":{"row":369,"column":2},"action":"insert","lines":["  "],"id":702}],[{"start":{"row":369,"column":2},"end":{"row":369,"column":3},"action":"insert","lines":["#"],"id":703}],[{"start":{"row":369,"column":3},"end":{"row":369,"column":4},"action":"insert","lines":[" "],"id":704},{"start":{"row":369,"column":4},"end":{"row":369,"column":5},"action":"insert","lines":["l"]},{"start":{"row":369,"column":5},"end":{"row":369,"column":6},"action":"insert","lines":["a"]},{"start":{"row":369,"column":6},"end":{"row":369,"column":7},"action":"insert","lines":["b"]}],[{"start":{"row":369,"column":7},"end":{"row":369,"column":8},"action":"insert","lines":[" "],"id":705},{"start":{"row":369,"column":8},"end":{"row":369,"column":9},"action":"insert","lines":["4"]}],[{"start":{"row":369,"column":9},"end":{"row":369,"column":11},"action":"remove","lines":["  "],"id":706},{"start":{"row":369,"column":9},"end":{"row":370,"column":0},"action":"insert","lines":["",""]},{"start":{"row":370,"column":0},"end":{"row":370,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":370,"column":0},"end":{"row":370,"column":2},"action":"remove","lines":["  "],"id":707}],[{"start":{"row":370,"column":0},"end":{"row":395,"column":0},"action":"insert","lines":["  OrderCognitoPool:","    Type: AWS::Cognito::UserPool","    Properties:","      UserPoolName: orders-pool","      Policies:","        PasswordPolicy:","          MinimumLength: 8","      UsernameAttributes:","        - email","      Schema:","        - AttributeDataType: String","          Name: email","          Required: true","","  OrderCognitoPoolClient:","    Type: AWS::Cognito::UserPoolClient","    Properties:","      UserPoolId: !Ref OrderCognitoPool","      ClientName: order-pool-client","      ExplicitAuthFlows:","        - ALLOW_ADMIN_USER_PASSWORD_AUTH","        - ALLOW_REFRESH_TOKEN_AUTH","      GenerateSecret: true","      SupportedIdentityProviders:","        - COGNITO",""],"id":708}],[{"start":{"row":376,"column":25},"end":{"row":376,"column":26},"action":"remove","lines":["8"],"id":709}],[{"start":{"row":376,"column":25},"end":{"row":376,"column":26},"action":"insert","lines":["5"],"id":710}],[{"start":{"row":429,"column":1},"end":{"row":429,"column":2},"action":"insert","lines":[" "],"id":711}],[{"start":{"row":429,"column":2},"end":{"row":429,"column":3},"action":"insert","lines":["l"],"id":712},{"start":{"row":429,"column":3},"end":{"row":429,"column":4},"action":"insert","lines":["a"]},{"start":{"row":429,"column":4},"end":{"row":429,"column":5},"action":"insert","lines":["b"]}],[{"start":{"row":429,"column":5},"end":{"row":429,"column":6},"action":"insert","lines":[" "],"id":713},{"start":{"row":429,"column":6},"end":{"row":429,"column":7},"action":"insert","lines":["4"]}],[{"start":{"row":429,"column":7},"end":{"row":430,"column":0},"action":"insert","lines":["",""],"id":714},{"start":{"row":430,"column":0},"end":{"row":430,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":429,"column":2},"end":{"row":429,"column":3},"action":"insert","lines":["#"],"id":715}],[{"start":{"row":429,"column":3},"end":{"row":429,"column":4},"action":"insert","lines":[" "],"id":716}],[{"start":{"row":430,"column":0},"end":{"row":430,"column":2},"action":"remove","lines":["  "],"id":717}],[{"start":{"row":430,"column":0},"end":{"row":436,"column":0},"action":"insert","lines":["  CognitoClientID:","    Description: \"The client ID of the Cognito user pool\"","    Value: !Ref OrderCognitoPoolClient","  CognitoUserPoolID:","    Description: \"ID of the Cognito userpool\"","    Value: !Ref OrderCognitoPool",""],"id":718}],[{"start":{"row":63,"column":23},"end":{"row":64,"column":0},"action":"insert","lines":["",""],"id":719},{"start":{"row":64,"column":0},"end":{"row":64,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":64,"column":6},"end":{"row":64,"column":8},"action":"remove","lines":["  "],"id":720},{"start":{"row":64,"column":4},"end":{"row":64,"column":6},"action":"remove","lines":["  "]}],[{"start":{"row":64,"column":4},"end":{"row":69,"column":0},"action":"insert","lines":["      Auth:","        DefaultAuthorizer: MyCognitoAuthorizer","        Authorizers:","          MyCognitoAuthorizer:","            UserPoolArn: !GetAtt OrderCognitoPool.Arn",""],"id":721}],[{"start":{"row":64,"column":8},"end":{"row":64,"column":10},"action":"remove","lines":["  "],"id":722},{"start":{"row":64,"column":6},"end":{"row":64,"column":8},"action":"remove","lines":["  "]}],[{"start":{"row":382,"column":25},"end":{"row":382,"column":26},"action":"remove","lines":["5"],"id":724}],[{"start":{"row":382,"column":25},"end":{"row":382,"column":26},"action":"insert","lines":["8"],"id":725}],[{"start":{"row":64,"column":0},"end":{"row":70,"column":0},"action":"remove","lines":["      Auth:","        DefaultAuthorizer: MyCognitoAuthorizer","        Authorizers:","          MyCognitoAuthorizer:","            UserPoolArn: !GetAtt OrderCognitoPool.Arn","",""],"id":726,"ignore":true},{"start":{"row":368,"column":0},"end":{"row":395,"column":0},"action":"remove","lines":["  ","  # lab 4","  OrderCognitoPool:","    Type: AWS::Cognito::UserPool","    Properties:","      UserPoolName: orders-pool","      Policies:","        PasswordPolicy:","          MinimumLength: 8","      UsernameAttributes:","        - email","      Schema:","        - AttributeDataType: String","          Name: email","          Required: true","","  OrderCognitoPoolClient:","    Type: AWS::Cognito::UserPoolClient","    Properties:","      UserPoolId: !Ref OrderCognitoPool","      ClientName: order-pool-client","      ExplicitAuthFlows:","        - ALLOW_ADMIN_USER_PASSWORD_AUTH","        - ALLOW_REFRESH_TOKEN_AUTH","      GenerateSecret: true","      SupportedIdentityProviders:","        - COGNITO",""]},{"start":{"row":402,"column":1},"end":{"row":409,"column":0},"action":"remove","lines":[" # lab 4","  CognitoClientID:","    Description: \"The client ID of the Cognito user pool\"","    Value: !Ref OrderCognitoPoolClient","  CognitoUserPoolID:","    Description: \"ID of the Cognito userpool\"","    Value: !Ref OrderCognitoPool",""]}],[{"start":{"row":64,"column":0},"end":{"row":70,"column":0},"action":"insert","lines":["      Auth:","        DefaultAuthorizer: MyCognitoAuthorizer","        Authorizers:","          MyCognitoAuthorizer:","            UserPoolArn: !GetAtt OrderCognitoPool.Arn","",""],"id":727,"ignore":true},{"start":{"row":374,"column":0},"end":{"row":401,"column":0},"action":"insert","lines":["  ","  # lab 4","  OrderCognitoPool:","    Type: AWS::Cognito::UserPool","    Properties:","      UserPoolName: orders-pool","      Policies:","        PasswordPolicy:","          MinimumLength: 8","      UsernameAttributes:","        - email","      Schema:","        - AttributeDataType: String","          Name: email","          Required: true","","  OrderCognitoPoolClient:","    Type: AWS::Cognito::UserPoolClient","    Properties:","      UserPoolId: !Ref OrderCognitoPool","      ClientName: order-pool-client","      ExplicitAuthFlows:","        - ALLOW_ADMIN_USER_PASSWORD_AUTH","        - ALLOW_REFRESH_TOKEN_AUTH","      GenerateSecret: true","      SupportedIdentityProviders:","        - COGNITO",""]},{"start":{"row":435,"column":1},"end":{"row":442,"column":0},"action":"insert","lines":[" # lab 4","  CognitoClientID:","    Description: \"The client ID of the Cognito user pool\"","    Value: !Ref OrderCognitoPoolClient","  CognitoUserPoolID:","    Description: \"ID of the Cognito userpool\"","    Value: !Ref OrderCognitoPool",""]}],[{"start":{"row":401,"column":0},"end":{"row":401,"column":1},"action":"insert","lines":["$"],"id":728}],[{"start":{"row":401,"column":0},"end":{"row":401,"column":1},"action":"remove","lines":["$"],"id":729}],[{"start":{"row":401,"column":0},"end":{"row":401,"column":1},"action":"insert","lines":["#"],"id":730}],[{"start":{"row":401,"column":1},"end":{"row":401,"column":2},"action":"insert","lines":[" "],"id":731},{"start":{"row":401,"column":2},"end":{"row":401,"column":3},"action":"insert","lines":["l"]},{"start":{"row":401,"column":3},"end":{"row":401,"column":4},"action":"insert","lines":["a"]},{"start":{"row":401,"column":4},"end":{"row":401,"column":5},"action":"insert","lines":["b"]}],[{"start":{"row":401,"column":5},"end":{"row":401,"column":6},"action":"insert","lines":[" "],"id":732},{"start":{"row":401,"column":6},"end":{"row":401,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":401,"column":7},"end":{"row":402,"column":0},"action":"insert","lines":["",""],"id":733}],[{"start":{"row":402,"column":0},"end":{"row":402,"column":2},"action":"insert","lines":["  "],"id":734}],[{"start":{"row":402,"column":0},"end":{"row":417,"column":0},"action":"insert","lines":["OrderCognitoDomain:","  Type: AWS::Cognito::UserPoolDomain","  Properties:","    Domain: !Sub \"order-app-${AWS::AccountId}\"","    UserPoolId: !Ref OrderCognitoPool","","OrderCognitoResourceServer:","  Type: AWS::Cognito::UserPoolResourceServer","  Properties:","    Identifier: \"order-api\"","    Name: \"order-api\"","    Scopes:","      - ScopeName: \"delete_order\"","        ScopeDescription: \"Delete Orders\"","    UserPoolId: !Ref OrderCognitoPool",""],"id":735}],[{"start":{"row":402,"column":0},"end":{"row":402,"column":2},"action":"insert","lines":["  "],"id":736},{"start":{"row":403,"column":0},"end":{"row":403,"column":2},"action":"insert","lines":["  "]},{"start":{"row":404,"column":0},"end":{"row":404,"column":2},"action":"insert","lines":["  "]},{"start":{"row":405,"column":0},"end":{"row":405,"column":2},"action":"insert","lines":["  "]},{"start":{"row":406,"column":0},"end":{"row":406,"column":2},"action":"insert","lines":["  "]},{"start":{"row":407,"column":0},"end":{"row":407,"column":2},"action":"insert","lines":["  "]},{"start":{"row":408,"column":0},"end":{"row":408,"column":2},"action":"insert","lines":["  "]},{"start":{"row":409,"column":0},"end":{"row":409,"column":2},"action":"insert","lines":["  "]},{"start":{"row":410,"column":0},"end":{"row":410,"column":2},"action":"insert","lines":["  "]},{"start":{"row":411,"column":0},"end":{"row":411,"column":2},"action":"insert","lines":["  "]},{"start":{"row":412,"column":0},"end":{"row":412,"column":2},"action":"insert","lines":["  "]},{"start":{"row":413,"column":0},"end":{"row":413,"column":2},"action":"insert","lines":["  "]},{"start":{"row":414,"column":0},"end":{"row":414,"column":2},"action":"insert","lines":["  "]},{"start":{"row":415,"column":0},"end":{"row":415,"column":2},"action":"insert","lines":["  "]},{"start":{"row":416,"column":0},"end":{"row":416,"column":2},"action":"insert","lines":["  "]},{"start":{"row":417,"column":0},"end":{"row":417,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":458,"column":0},"end":{"row":458,"column":2},"action":"insert","lines":["  "],"id":737}],[{"start":{"row":458,"column":2},"end":{"row":458,"column":3},"action":"insert","lines":["l"],"id":738},{"start":{"row":458,"column":3},"end":{"row":458,"column":4},"action":"insert","lines":["a"]},{"start":{"row":458,"column":4},"end":{"row":458,"column":5},"action":"insert","lines":["b"]}],[{"start":{"row":458,"column":5},"end":{"row":458,"column":6},"action":"insert","lines":[" "],"id":739},{"start":{"row":458,"column":6},"end":{"row":458,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":458,"column":2},"end":{"row":458,"column":3},"action":"insert","lines":["#"],"id":740}],[{"start":{"row":458,"column":3},"end":{"row":458,"column":4},"action":"insert","lines":[" "],"id":741}],[{"start":{"row":458,"column":9},"end":{"row":459,"column":0},"action":"insert","lines":["",""],"id":742},{"start":{"row":459,"column":0},"end":{"row":459,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":459,"column":0},"end":{"row":459,"column":2},"action":"remove","lines":["  "],"id":743}],[{"start":{"row":459,"column":0},"end":{"row":465,"column":0},"action":"insert","lines":["CognitoDomain:","  Description: \"ID of the Cognito Domain\"","  Value: !Ref OrderCognitoDomain","CognitoResourceServer:","  Description: \"Cognito Resource Server\"","  Value: !Ref OrderCognitoResourceServer",""],"id":744}],[{"start":{"row":459,"column":0},"end":{"row":459,"column":2},"action":"insert","lines":["  "],"id":745},{"start":{"row":460,"column":0},"end":{"row":460,"column":2},"action":"insert","lines":["  "]},{"start":{"row":461,"column":0},"end":{"row":461,"column":2},"action":"insert","lines":["  "]},{"start":{"row":462,"column":0},"end":{"row":462,"column":2},"action":"insert","lines":["  "]},{"start":{"row":463,"column":0},"end":{"row":463,"column":2},"action":"insert","lines":["  "]},{"start":{"row":464,"column":0},"end":{"row":464,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":400,"column":17},"end":{"row":401,"column":0},"action":"insert","lines":["",""],"id":746},{"start":{"row":401,"column":0},"end":{"row":401,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":401,"column":6},"end":{"row":401,"column":8},"action":"remove","lines":["  "],"id":747}],[{"start":{"row":401,"column":6},"end":{"row":411,"column":0},"action":"insert","lines":["      AllowedOAuthFlows:","        - code","      AllowedOAuthFlowsUserPoolClient: true","      AllowedOAuthScopes:","        - openid","        - profile","        - \"order-api/delete_order\"","      CallbackURLs:","        - \"https://localhost/callback\"","    DependsOn: OrderCognitoResourceServer",""],"id":748}],[{"start":{"row":401,"column":10},"end":{"row":401,"column":12},"action":"remove","lines":["  "],"id":749},{"start":{"row":401,"column":8},"end":{"row":401,"column":10},"action":"remove","lines":["  "]},{"start":{"row":401,"column":6},"end":{"row":401,"column":8},"action":"remove","lines":["  "]}],[{"start":{"row":400,"column":17},"end":{"row":401,"column":0},"action":"insert","lines":["",""],"id":750},{"start":{"row":401,"column":0},"end":{"row":401,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":401,"column":6},"end":{"row":401,"column":8},"action":"remove","lines":["  "],"id":751}],[{"start":{"row":401,"column":6},"end":{"row":401,"column":7},"action":"insert","lines":["#"],"id":752},{"start":{"row":401,"column":7},"end":{"row":401,"column":8},"action":"insert","lines":["l"]},{"start":{"row":401,"column":8},"end":{"row":401,"column":9},"action":"insert","lines":["a"]},{"start":{"row":401,"column":9},"end":{"row":401,"column":10},"action":"insert","lines":["b"]}],[{"start":{"row":401,"column":10},"end":{"row":401,"column":11},"action":"insert","lines":[" "],"id":753},{"start":{"row":401,"column":11},"end":{"row":401,"column":12},"action":"insert","lines":["5"]}]]},"ace":{"folds":[],"scrolltop":5445,"scrollleft":0,"selection":{"start":{"row":401,"column":12},"end":{"row":401,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":112,"state":"start","mode":"ace/mode/yaml"}},"timestamp":1674719786767,"hash":"4cb80f51523d0441b4223b14df33dd0dbe060092"}